---
import Layout from "../layouts/Layout.astro"; // ðŸ”¹ RUTA RELATIVA CORREGIDA
const { frontmatter } = Astro.props;
const showBack = frontmatter?.showBack !== false;
---

<Layout title={`${frontmatter.title} - La Casa Que Canta`}>

<section class="relative">
    <div>
                <div class="swiper mySwiper overflow-hidden aspect-square md:aspect-[16/6]">
                    {frontmatter.showAwards === false ? null : (
                        frontmatter.title && frontmatter.title.toLowerCase().includes('mar y cielo') ? (
                            <div class="absolute top-4 right-4 z-30 flex gap-4">
                                <img src="/images/image2vector.svg" alt="Michelin" class="w-24 h-auto drop-shadow-xl" />
                                <img src="/images/dinnerchoise.webp" alt="Dinner Club" class="w-24 h-auto drop-shadow-xl" />
                            </div>
                        ) : (
                            <div class="absolute top-4 right-4 z-30">
                                <img src="/images/image2vector.svg" alt="Michelin" class="w-24 h-auto drop-shadow-xl" />
                            </div>
                        )
                    )}
            <div class="swiper-wrapper">
                {frontmatter.items.map((item) => (
                    <div class="swiper-slide">
                        <img 
                            class="cursor-pointer object-cover object-center transition duration-300 ease-in-out w-full h-full" 
                            data-page="false" 
                            src={item.image} 
                            alt={frontmatter.title} 
                            data-image={item.image} 
                            data-text={item.text} 
                        />
                    </div>
                ))}
            </div>
            <div class="swiper-pagination"></div>
        </div>
    </div>

    <div class="px-8 grid relative text-center items-center pt-12 pb-12 prose-base">
        <div class="absolute top-1/4 right-0 left-0 mx-auto">
            <img src="/palm-bg-layout.png" class="hidden md:block mx-auto rotate-180 opacity-80" alt="">
        </div>
        <div class="relative">
            <div class="mb-6">
                <h1 class="text-5xl lg:text-7xl font-bold ">{frontmatter.title}</h1>
                <mark class="font-bold">{frontmatter.description}</mark>
            </div>
            <slot/>
        </div>
        {showBack && (
            <div class="mt-10 relative">
                <a href="/" class="bg-black/90 font-semibold uppercase py-3 px-6 text-white hover:bg-black/60">{Astro.url.pathname.startsWith('/es') ? 'Regresar Home' : 'Back to Home'}</a>
            </div>
        )}
    </div>
</section>

<script>
    import Swiper from "swiper"
    import { Pagination, Autoplay } from 'swiper/modules';

    import 'swiper/css';
    import 'swiper/css/navigation';
    import 'swiper/css/pagination';

    var swiper = new Swiper(".mySwiper", {
        modules: [Pagination, Autoplay],
        spaceBetween: 30,
        centeredSlides: true,
        autoplay: {
            delay: 4000,
            disableOnInteraction: false,
        },
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
    });
</script>

</Layout>
{frontmatter.title && frontmatter.title.toLowerCase().includes('mar y cielo') && frontmatter.showAwards !== false ? (
    <div class="w-full flex justify-end items-center px-4 pb-2 gap-4">
        <img src="/images/image2vector.svg" alt="Michelin" class="w-24 h-auto drop-shadow-xl" style="pointer-events:auto;" />
        <img src="/images/dinnerchoise.webp" alt="Dinner Club" class="w-24 h-auto drop-shadow-xl" style="pointer-events:auto;" />
    </div>
) : null}
</Layout>
